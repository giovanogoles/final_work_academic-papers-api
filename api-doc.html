<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>API Docs - Final Work Academic Papers</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css" />
  <style>
    body { margin: 0; }
  </style>
</head>
<body>
  <div id="swagger-ui"></div>

  <script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist/swagger-ui-standalone-preset.js"></script>
  <script>
    window.onload = () => {
      const swaggerSpec = {
        "openapi": "3.0.3",
        "info": {
          "title": "Final Work Academic Papers API",
          "version": "1.0.0",
          "description": "API for managing academic paper submissions. Some routes require authentication with JWT."
        },
        "servers": [
          { "url": "http://localhost:3000", "description": "Local server" }
        ],
        "components": {
          "securitySchemes": {
            "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
          },
          "schemas": {
            "UserRegister": {
              "type": "object",
              "properties": {
                "username": { "type": "string", "example": "newuser" },
                "password": { "type": "string", "example": "password123" },
                "role": { "type": "string", "example": "student" }
              },
              "required": ["username","password","role"]
            },
            "UserLogin": {
              "type": "object",
              "properties": {
                "username": { "type": "string", "example": "newuser" },
                "password": { "type": "string", "example": "password123" }
              },
              "required": ["username","password"]
            },
            "LoginResponse": {
              "type": "object",
              "properties": { "token": { "type": "string", "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." } }
            },
            "Paper": {
              "type": "object",
              "properties": {
                "title": { "type": "string", "example": "My Academic Paper" },
                "abstract": { "type": "string", "example": "This is an abstract of my paper." },
                "authors": { "type": "array", "items": { "type": "string" }, "example": ["Author 1","Author 2"] },
                "keywords": { "type": "array", "items": { "type": "string" }, "example": ["academic","paper","research"] }
              },
              "required": ["title","abstract","authors","keywords"]
            },
            "PaperResponse": {
              "type": "object",
              "properties": {
                "message": { "type": "string", "example": "Paper submitted successfully" },
                "paperId": { "type": "string", "example": "60a7b1e9c7c8b3a2b4a5c6d7" }
              }
            },
            "PaperList": { "type": "array", "items": { "$ref": "#/components/schemas/Paper" } },
            "DeleteResponse": { "type": "object", "properties": { "message": { "type": "string", "example": "Paper deleted successfully" } } }
          }
        },
        "paths": {
          "/api/auth/register": {
            "post": {
              "summary": "Register a new user",
              "tags": ["Authentication"],
              "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserRegister" } } } },
              "responses": { "200": { "description": "User registered successfully", "content": { "application/json": { "example": { "message": "User registered successfully" } } } } }
            }
          },
          "/api/auth/login": {
            "post": {
              "summary": "Login user",
              "tags": ["Authentication"],
              "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserLogin" } } } },
              "responses": { "200": { "description": "JWT token returned", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/LoginResponse" } } } } }
            }
          },
          "/api/papers": {
            "post": {
              "summary": "Create a new paper submission",
              "tags": ["Paper Submissions"],
              "security": [{ "bearerAuth": [] }],
              "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Paper" } } } },
              "responses": { "200": { "description": "Paper submitted successfully", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/PaperResponse" } } } } }
            },
            "get": {
              "summary": "Retrieve all papers",
              "tags": ["Paper Submissions"],
              "security": [{ "bearerAuth": [] }],
              "responses": { "200": { "description": "List of papers", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/PaperList" } } } } }
            }
          },
          "/api/papers/{id}": {
            "get": {
              "summary": "Retrieve a specific paper by ID",
              "tags": ["Paper Submissions"],
              "security": [{ "bearerAuth": [] }],
              "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
              "responses": { "200": { "description": "Paper found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Paper" } } } } }
            },
            "delete": {
              "summary": "Delete a specific paper by ID",
              "tags": ["Paper Submissions"],
              "security": [{ "bearerAuth": [] }],
              "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
              "responses": { "200": { "description": "Paper deleted", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/DeleteResponse" } } } } }
            }
          }
        }
      };

      SwaggerUIBundle({
        spec: swaggerSpec,
        dom_id: "#swagger-ui",
        presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],
        layout: "BaseLayout"
      });
    };
  </script>
</body>
</html>
