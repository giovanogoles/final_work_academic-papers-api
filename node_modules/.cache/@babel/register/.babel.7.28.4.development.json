{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\\\\src\\\\tests\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\",\"filename\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\\\\src\\\\tests\\\\setup.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.4:development":{"value":{"code":"import mongoose from 'mongoose';\nimport { expect } from 'chai';\nimport app from '../app.js'; // Adjust the import based on your app's structure\n\nbefore(async () => {\n  // Connect to the test database\n  await mongoose.connect(process.env.TEST_DATABASE_URL, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  });\n});\nafter(async () => {\n  // Disconnect from the database after tests\n  await mongoose.connection.dropDatabase();\n  await mongoose.disconnect();\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsImV4cGVjdCIsImFwcCIsImJlZm9yZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9EQVRBQkFTRV9VUkwiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJhZnRlciIsImNvbm5lY3Rpb24iLCJkcm9wRGF0YWJhc2UiLCJkaXNjb25uZWN0Il0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGdvbGVzXFxPbmVEcml2ZVxcUUFcXFBvc19BdXRvbWFjYW9fVGVzdGVzXFwwNy1BdXRvbWFjYW9fdGVzdGVzX0FQSVxcQWNhZGVtaWNfUHVibGljX1Rlc3Rlc19BUElcXGFjYWRlbWljLXBhcGVycy1hcGlcXHNyY1xcdGVzdHNcXCIsInNvdXJjZXMiOlsic2V0dXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xuaW1wb3J0IGFwcCBmcm9tICcuLi9hcHAuanMnOyAvLyBBZGp1c3QgdGhlIGltcG9ydCBiYXNlZCBvbiB5b3VyIGFwcCdzIHN0cnVjdHVyZVxuXG5iZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAvLyBDb25uZWN0IHRvIHRoZSB0ZXN0IGRhdGFiYXNlXG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuVEVTVF9EQVRBQkFTRV9VUkwsIHtcbiAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICB9KTtcbn0pO1xuXG5hZnRlcihhc3luYyAoKSA9PiB7XG4gIC8vIERpc2Nvbm5lY3QgZnJvbSB0aGUgZGF0YWJhc2UgYWZ0ZXIgdGVzdHNcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5kcm9wRGF0YWJhc2UoKTtcbiAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxRQUFRLE1BQU0sVUFBVTtBQUMvQixTQUFTQyxNQUFNLFFBQVEsTUFBTTtBQUM3QixPQUFPQyxHQUFHLE1BQU0sV0FBVyxDQUFDLENBQUM7O0FBRTdCQyxNQUFNLENBQUMsWUFBWTtFQUNqQjtFQUNBLE1BQU1ILFFBQVEsQ0FBQ0ksT0FBTyxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsaUJBQWlCLEVBQUU7SUFDcERDLGVBQWUsRUFBRSxJQUFJO0lBQ3JCQyxrQkFBa0IsRUFBRTtFQUN0QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRkMsS0FBSyxDQUFDLFlBQVk7RUFDaEI7RUFDQSxNQUFNVixRQUFRLENBQUNXLFVBQVUsQ0FBQ0MsWUFBWSxDQUFDLENBQUM7RUFDeEMsTUFBTVosUUFBUSxDQUFDYSxVQUFVLENBQUMsQ0FBQztBQUM3QixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["mongoose","expect","app","before","connect","process","env","TEST_DATABASE_URL","useNewUrlParser","useUnifiedTopology","after","connection","dropDatabase","disconnect"],"sourceRoot":"C:\\Users\\goles\\OneDrive\\QA\\Pos_Automacao_Testes\\07-Automacao_testes_API\\Academic_Public_Testes_API\\academic-papers-api\\src\\tests\\","sources":["setup.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport { expect } from 'chai';\nimport app from '../app.js'; // Adjust the import based on your app's structure\n\nbefore(async () => {\n  // Connect to the test database\n  await mongoose.connect(process.env.TEST_DATABASE_URL, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n  });\n});\n\nafter(async () => {\n  // Disconnect from the database after tests\n  await mongoose.connection.dropDatabase();\n  await mongoose.disconnect();\n});"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,UAAU;AAC/B,SAASC,MAAM,QAAQ,MAAM;AAC7B,OAAOC,GAAG,MAAM,WAAW,CAAC,CAAC;;AAE7BC,MAAM,CAAC,YAAY;EACjB;EACA,MAAMH,QAAQ,CAACI,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAE;IACpDC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE;EACtB,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFC,KAAK,CAAC,YAAY;EAChB;EACA,MAAMV,QAAQ,CAACW,UAAU,CAACC,YAAY,CAAC,CAAC;EACxC,MAAMZ,QAAQ,CAACa,UAAU,CAAC,CAAC;AAC7B,CAAC,CAAC","ignoreList":[]}},"mtime":1759198805591},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\\\\src\\\\tests\\\\controllers\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\",\"filename\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\\\\src\\\\tests\\\\controllers\\\\paper.controller.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.4:development":{"value":{"code":"import { expect } from 'chai';\nimport sinon from 'sinon';\nimport * as paperController from '../../controllers/paper.controller.js';\nimport paperService from '../../services/paper.service.js';\ndescribe('Paper Controller', () => {\n  let req, res;\n  beforeEach(() => {\n    req = {\n      body: {\n        title: 'Test Paper',\n        content: 'This is a test content.',\n        author: '507f1f77bcf86cd799439011'\n      },\n      params: {\n        id: '1'\n      },\n      user: {\n        role: 'teacher'\n      }\n    };\n    res = {\n      status: sinon.stub().returnsThis(),\n      json: sinon.stub(),\n      send: sinon.stub()\n    };\n  });\n  afterEach(() => {\n    sinon.restore();\n  });\n  it('should create a new paper submission', async () => {\n    const fakePaper = {\n      _id: '1',\n      ...req.body\n    };\n    sinon.stub(paperService, 'createPaper').resolves(fakePaper);\n    await paperController.createPaper(req, res);\n    expect(res.status.calledWith(201)).to.be.true;\n    expect(res.json.calledWithMatch({\n      message: 'Paper created successfully',\n      paper: fakePaper\n    })).to.be.true;\n  });\n  it('should list all papers', async () => {\n    const fakePapers = [{\n      _id: '1',\n      title: 'Paper 1'\n    }, {\n      _id: '2',\n      title: 'Paper 2'\n    }];\n    sinon.stub(paperService, 'getAllPapers').resolves(fakePapers);\n    await paperController.getPapers(req, res);\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch(fakePapers)).to.be.true;\n  });\n  it('should retrieve a paper submission', async () => {\n    const fakePaper = {\n      _id: '1',\n      title: 'Test Paper',\n      content: 'This is a test content.'\n    };\n    sinon.stub(paperService, 'getPaperById').resolves(fakePaper);\n    await paperController.getPaperById(req, res);\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch(fakePaper)).to.be.true;\n  });\n  it('should return 404 if paper not found', async () => {\n    sinon.stub(paperService, 'getPaperById').resolves(null);\n    await paperController.getPaperById(req, res);\n    expect(res.status.calledWith(404)).to.be.true;\n    expect(res.send.calledWith('Paper not found')).to.be.true;\n  });\n  it('should update a paper submission', async () => {\n    const updatedPaper = {\n      _id: '1',\n      title: 'Updated Title',\n      content: 'Updated content.'\n    };\n    sinon.stub(paperService, 'updatePaper').resolves(updatedPaper);\n    await paperController.updatePaper(req, res);\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch({\n      message: 'Paper updated successfully',\n      paper: updatedPaper\n    })).to.be.true;\n  });\n  it('should return 404 if trying to update a non-existent paper', async () => {\n    sinon.stub(paperService, 'updatePaper').resolves(null);\n    await paperController.updatePaper(req, res);\n    expect(res.status.calledWith(404)).to.be.true;\n    expect(res.send.calledWith('Paper not found')).to.be.true;\n  });\n  it('should delete a paper submission', async () => {\n    const fakePaper = {\n      _id: '1',\n      title: 'Test Paper'\n    };\n    sinon.stub(paperService, 'deletePaper').resolves(fakePaper);\n    await paperController.deletePaper(req, res);\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch({\n      message: 'Paper deleted successfully'\n    })).to.be.true;\n  });\n  it('should return 404 if trying to delete a non-existent paper', async () => {\n    sinon.stub(paperService, 'deletePaper').resolves(null);\n    await paperController.deletePaper(req, res);\n    expect(res.status.calledWith(404)).to.be.true;\n    expect(res.send.calledWith('Paper not found')).to.be.true;\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBlY3QiLCJzaW5vbiIsInBhcGVyQ29udHJvbGxlciIsInBhcGVyU2VydmljZSIsImRlc2NyaWJlIiwicmVxIiwicmVzIiwiYmVmb3JlRWFjaCIsImJvZHkiLCJ0aXRsZSIsImNvbnRlbnQiLCJhdXRob3IiLCJwYXJhbXMiLCJpZCIsInVzZXIiLCJyb2xlIiwic3RhdHVzIiwic3R1YiIsInJldHVybnNUaGlzIiwianNvbiIsInNlbmQiLCJhZnRlckVhY2giLCJyZXN0b3JlIiwiaXQiLCJmYWtlUGFwZXIiLCJfaWQiLCJyZXNvbHZlcyIsImNyZWF0ZVBhcGVyIiwiY2FsbGVkV2l0aCIsInRvIiwiYmUiLCJ0cnVlIiwiY2FsbGVkV2l0aE1hdGNoIiwibWVzc2FnZSIsInBhcGVyIiwiZmFrZVBhcGVycyIsImdldFBhcGVycyIsImdldFBhcGVyQnlJZCIsInVwZGF0ZWRQYXBlciIsInVwZGF0ZVBhcGVyIiwiZGVsZXRlUGFwZXIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcZ29sZXNcXE9uZURyaXZlXFxRQVxcUG9zX0F1dG9tYWNhb19UZXN0ZXNcXDA3LUF1dG9tYWNhb190ZXN0ZXNfQVBJXFxBY2FkZW1pY19QdWJsaWNfVGVzdGVzX0FQSVxcYWNhZGVtaWMtcGFwZXJzLWFwaVxcc3JjXFx0ZXN0c1xcY29udHJvbGxlcnNcXCIsInNvdXJjZXMiOlsicGFwZXIuY29udHJvbGxlci50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCAqIGFzIHBhcGVyQ29udHJvbGxlciBmcm9tICcuLi8uLi9jb250cm9sbGVycy9wYXBlci5jb250cm9sbGVyLmpzJztcbmltcG9ydCBwYXBlclNlcnZpY2UgZnJvbSAnLi4vLi4vc2VydmljZXMvcGFwZXIuc2VydmljZS5qcyc7XG5cbmRlc2NyaWJlKCdQYXBlciBDb250cm9sbGVyJywgKCkgPT4ge1xuICBsZXQgcmVxLCByZXM7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcmVxID0ge1xuICAgICAgYm9keToge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUGFwZXInLFxuICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIHRlc3QgY29udGVudC4nLFxuICAgICAgICBhdXRob3I6ICc1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEnXG4gICAgICB9LFxuICAgICAgcGFyYW1zOiB7IGlkOiAnMScgfSxcbiAgICAgIHVzZXI6IHsgcm9sZTogJ3RlYWNoZXInIH1cbiAgICB9O1xuICAgIHJlcyA9IHtcbiAgICAgIHN0YXR1czogc2lub24uc3R1YigpLnJldHVybnNUaGlzKCksXG4gICAgICBqc29uOiBzaW5vbi5zdHViKCksXG4gICAgICBzZW5kOiBzaW5vbi5zdHViKClcbiAgICB9O1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHNpbm9uLnJlc3RvcmUoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBuZXcgcGFwZXIgc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBmYWtlUGFwZXIgPSB7IF9pZDogJzEnLCAuLi5yZXEuYm9keSB9O1xuICAgIHNpbm9uLnN0dWIocGFwZXJTZXJ2aWNlLCAnY3JlYXRlUGFwZXInKS5yZXNvbHZlcyhmYWtlUGFwZXIpO1xuXG4gICAgYXdhaXQgcGFwZXJDb250cm9sbGVyLmNyZWF0ZVBhcGVyKHJlcSwgcmVzKTtcblxuICAgIGV4cGVjdChyZXMuc3RhdHVzLmNhbGxlZFdpdGgoMjAxKSkudG8uYmUudHJ1ZTtcbiAgICBleHBlY3QocmVzLmpzb24uY2FsbGVkV2l0aE1hdGNoKHsgbWVzc2FnZTogJ1BhcGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgcGFwZXI6IGZha2VQYXBlciB9KSkudG8uYmUudHJ1ZTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBsaXN0IGFsbCBwYXBlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZmFrZVBhcGVycyA9IFt7IF9pZDogJzEnLCB0aXRsZTogJ1BhcGVyIDEnIH0sIHsgX2lkOiAnMicsIHRpdGxlOiAnUGFwZXIgMicgfV07XG4gICAgc2lub24uc3R1YihwYXBlclNlcnZpY2UsICdnZXRBbGxQYXBlcnMnKS5yZXNvbHZlcyhmYWtlUGFwZXJzKTtcblxuICAgIGF3YWl0IHBhcGVyQ29udHJvbGxlci5nZXRQYXBlcnMocmVxLCByZXMpO1xuXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMuY2FsbGVkV2l0aCgyMDApKS50by5iZS50cnVlO1xuICAgIGV4cGVjdChyZXMuanNvbi5jYWxsZWRXaXRoTWF0Y2goZmFrZVBhcGVycykpLnRvLmJlLnRydWU7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0cmlldmUgYSBwYXBlciBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGZha2VQYXBlciA9IHsgX2lkOiAnMScsIHRpdGxlOiAnVGVzdCBQYXBlcicsIGNvbnRlbnQ6ICdUaGlzIGlzIGEgdGVzdCBjb250ZW50LicgfTtcbiAgICBzaW5vbi5zdHViKHBhcGVyU2VydmljZSwgJ2dldFBhcGVyQnlJZCcpLnJlc29sdmVzKGZha2VQYXBlcik7XG5cbiAgICBhd2FpdCBwYXBlckNvbnRyb2xsZXIuZ2V0UGFwZXJCeUlkKHJlcSwgcmVzKTtcblxuICAgIGV4cGVjdChyZXMuc3RhdHVzLmNhbGxlZFdpdGgoMjAwKSkudG8uYmUudHJ1ZTtcbiAgICBleHBlY3QocmVzLmpzb24uY2FsbGVkV2l0aE1hdGNoKGZha2VQYXBlcikpLnRvLmJlLnRydWU7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBpZiBwYXBlciBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgc2lub24uc3R1YihwYXBlclNlcnZpY2UsICdnZXRQYXBlckJ5SWQnKS5yZXNvbHZlcyhudWxsKTtcblxuICAgIGF3YWl0IHBhcGVyQ29udHJvbGxlci5nZXRQYXBlckJ5SWQocmVxLCByZXMpO1xuXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMuY2FsbGVkV2l0aCg0MDQpKS50by5iZS50cnVlO1xuICAgIGV4cGVjdChyZXMuc2VuZC5jYWxsZWRXaXRoKCdQYXBlciBub3QgZm91bmQnKSkudG8uYmUudHJ1ZTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB1cGRhdGUgYSBwYXBlciBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZWRQYXBlciA9IHsgX2lkOiAnMScsIHRpdGxlOiAnVXBkYXRlZCBUaXRsZScsIGNvbnRlbnQ6ICdVcGRhdGVkIGNvbnRlbnQuJyB9O1xuICAgIHNpbm9uLnN0dWIocGFwZXJTZXJ2aWNlLCAndXBkYXRlUGFwZXInKS5yZXNvbHZlcyh1cGRhdGVkUGFwZXIpO1xuXG4gICAgYXdhaXQgcGFwZXJDb250cm9sbGVyLnVwZGF0ZVBhcGVyKHJlcSwgcmVzKTtcblxuICAgIGV4cGVjdChyZXMuc3RhdHVzLmNhbGxlZFdpdGgoMjAwKSkudG8uYmUudHJ1ZTtcbiAgICBleHBlY3QocmVzLmpzb24uY2FsbGVkV2l0aE1hdGNoKHsgbWVzc2FnZTogJ1BhcGVyIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JywgcGFwZXI6IHVwZGF0ZWRQYXBlciB9KSkudG8uYmUudHJ1ZTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gNDA0IGlmIHRyeWluZyB0byB1cGRhdGUgYSBub24tZXhpc3RlbnQgcGFwZXInLCBhc3luYyAoKSA9PiB7XG4gICAgc2lub24uc3R1YihwYXBlclNlcnZpY2UsICd1cGRhdGVQYXBlcicpLnJlc29sdmVzKG51bGwpO1xuXG4gICAgYXdhaXQgcGFwZXJDb250cm9sbGVyLnVwZGF0ZVBhcGVyKHJlcSwgcmVzKTtcblxuICAgIGV4cGVjdChyZXMuc3RhdHVzLmNhbGxlZFdpdGgoNDA0KSkudG8uYmUudHJ1ZTtcbiAgICBleHBlY3QocmVzLnNlbmQuY2FsbGVkV2l0aCgnUGFwZXIgbm90IGZvdW5kJykpLnRvLmJlLnRydWU7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZGVsZXRlIGEgcGFwZXIgc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBmYWtlUGFwZXIgPSB7IF9pZDogJzEnLCB0aXRsZTogJ1Rlc3QgUGFwZXInIH07XG4gICAgc2lub24uc3R1YihwYXBlclNlcnZpY2UsICdkZWxldGVQYXBlcicpLnJlc29sdmVzKGZha2VQYXBlcik7XG5cbiAgICBhd2FpdCBwYXBlckNvbnRyb2xsZXIuZGVsZXRlUGFwZXIocmVxLCByZXMpO1xuXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMuY2FsbGVkV2l0aCgyMDApKS50by5iZS50cnVlO1xuICAgIGV4cGVjdChyZXMuanNvbi5jYWxsZWRXaXRoTWF0Y2goeyBtZXNzYWdlOiAnUGFwZXIgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pKS50by5iZS50cnVlO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiA0MDQgaWYgdHJ5aW5nIHRvIGRlbGV0ZSBhIG5vbi1leGlzdGVudCBwYXBlcicsIGFzeW5jICgpID0+IHtcbiAgICBzaW5vbi5zdHViKHBhcGVyU2VydmljZSwgJ2RlbGV0ZVBhcGVyJykucmVzb2x2ZXMobnVsbCk7XG5cbiAgICBhd2FpdCBwYXBlckNvbnRyb2xsZXIuZGVsZXRlUGFwZXIocmVxLCByZXMpO1xuXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMuY2FsbGVkV2l0aCg0MDQpKS50by5iZS50cnVlO1xuICAgIGV4cGVjdChyZXMuc2VuZC5jYWxsZWRXaXRoKCdQYXBlciBub3QgZm91bmQnKSkudG8uYmUudHJ1ZTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLE1BQU0sUUFBUSxNQUFNO0FBQzdCLE9BQU9DLEtBQUssTUFBTSxPQUFPO0FBQ3pCLE9BQU8sS0FBS0MsZUFBZSxNQUFNLHVDQUF1QztBQUN4RSxPQUFPQyxZQUFZLE1BQU0saUNBQWlDO0FBRTFEQyxRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtFQUNqQyxJQUFJQyxHQUFHLEVBQUVDLEdBQUc7RUFFWkMs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","map":{"version":3,"names":["expect","sinon","paperController","paperService","describe","req","res","beforeEach","body","title","content","author","params","id","user","role","status","stub","returnsThis","json","send","afterEach","restore","it","fakePaper","_id","resolves","createPaper","calledWith","to","be","true","calledWithMatch","message","paper","fakePapers","getPapers","getPaperById","updatedPaper","updatePaper","deletePaper"],"sourceRoot":"C:\\Users\\goles\\OneDrive\\QA\\Pos_Automacao_Testes\\07-Automacao_testes_API\\Academic_Public_Testes_API\\academic-papers-api\\src\\tests\\controllers\\","sources":["paper.controller.test.js"],"sourcesContent":["import { expect } from 'chai';\nimport sinon from 'sinon';\nimport * as paperController from '../../controllers/paper.controller.js';\nimport paperService from '../../services/paper.service.js';\n\ndescribe('Paper Controller', () => {\n  let req, res;\n\n  beforeEach(() => {\n    req = {\n      body: {\n        title: 'Test Paper',\n        content: 'This is a test content.',\n        author: '507f1f77bcf86cd799439011'\n      },\n      params: { id: '1' },\n      user: { role: 'teacher' }\n    };\n    res = {\n      status: sinon.stub().returnsThis(),\n      json: sinon.stub(),\n      send: sinon.stub()\n    };\n  });\n\n  afterEach(() => {\n    sinon.restore();\n  });\n\n  it('should create a new paper submission', async () => {\n    const fakePaper = { _id: '1', ...req.body };\n    sinon.stub(paperService, 'createPaper').resolves(fakePaper);\n\n    await paperController.createPaper(req, res);\n\n    expect(res.status.calledWith(201)).to.be.true;\n    expect(res.json.calledWithMatch({ message: 'Paper created successfully', paper: fakePaper })).to.be.true;\n  });\n\n  it('should list all papers', async () => {\n    const fakePapers = [{ _id: '1', title: 'Paper 1' }, { _id: '2', title: 'Paper 2' }];\n    sinon.stub(paperService, 'getAllPapers').resolves(fakePapers);\n\n    await paperController.getPapers(req, res);\n\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch(fakePapers)).to.be.true;\n  });\n\n  it('should retrieve a paper submission', async () => {\n    const fakePaper = { _id: '1', title: 'Test Paper', content: 'This is a test content.' };\n    sinon.stub(paperService, 'getPaperById').resolves(fakePaper);\n\n    await paperController.getPaperById(req, res);\n\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch(fakePaper)).to.be.true;\n  });\n\n  it('should return 404 if paper not found', async () => {\n    sinon.stub(paperService, 'getPaperById').resolves(null);\n\n    await paperController.getPaperById(req, res);\n\n    expect(res.status.calledWith(404)).to.be.true;\n    expect(res.send.calledWith('Paper not found')).to.be.true;\n  });\n\n  it('should update a paper submission', async () => {\n    const updatedPaper = { _id: '1', title: 'Updated Title', content: 'Updated content.' };\n    sinon.stub(paperService, 'updatePaper').resolves(updatedPaper);\n\n    await paperController.updatePaper(req, res);\n\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch({ message: 'Paper updated successfully', paper: updatedPaper })).to.be.true;\n  });\n\n  it('should return 404 if trying to update a non-existent paper', async () => {\n    sinon.stub(paperService, 'updatePaper').resolves(null);\n\n    await paperController.updatePaper(req, res);\n\n    expect(res.status.calledWith(404)).to.be.true;\n    expect(res.send.calledWith('Paper not found')).to.be.true;\n  });\n\n  it('should delete a paper submission', async () => {\n    const fakePaper = { _id: '1', title: 'Test Paper' };\n    sinon.stub(paperService, 'deletePaper').resolves(fakePaper);\n\n    await paperController.deletePaper(req, res);\n\n    expect(res.status.calledWith(200)).to.be.true;\n    expect(res.json.calledWithMatch({ message: 'Paper deleted successfully' })).to.be.true;\n  });\n\n  it('should return 404 if trying to delete a non-existent paper', async () => {\n    sinon.stub(paperService, 'deletePaper').resolves(null);\n\n    await paperController.deletePaper(req, res);\n\n    expect(res.status.calledWith(404)).to.be.true;\n    expect(res.send.calledWith('Paper not found')).to.be.true;\n  });\n});"],"mappings":"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","ignoreList":[]}},"mtime":1759203819602},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\\\\src\\\\tests\\\\integration\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\",\"filename\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\\\\src\\\\tests\\\\integration\\\\paper.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\goles\\\\OneDrive\\\\QA\\\\Pos_Automacao_Testes\\\\07-Automacao_testes_API\\\\Academic_Public_Testes_API\\\\academic-papers-api\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.28.4:development":{"value":{"code":"import request from 'supertest';\nimport mongoose from 'mongoose';\nimport { expect } from 'chai';\nimport app from '../../app.js';\nimport config from '../../config/config.js';\ndescribe('Integration Tests for Academic Paper Submission API', function () {\n  this.timeout(10000); // aumenta timeout para evitar falhas por lentidão\n\n  before(async () => {\n    await mongoose.connect(config.db.uri, config.db.options);\n    await mongoose.connection.db.dropDatabase();\n  });\n  after(async () => {\n    await mongoose.connection.dropDatabase();\n    await mongoose.connection.close();\n  });\n  let createdPaperId;\n  it('should create a new paper submission', async () => {\n    const res = await request(app).post('/api/papers').send({\n      title: 'Integration Test Paper',\n      content: 'This is a test content for integration.',\n      author: new mongoose.Types.ObjectId().toString()\n    }).expect(201);\n    expect(res.body).to.have.property('message', 'Paper created successfully');\n    expect(res.body).to.have.property('paper');\n    expect(res.body.paper).to.have.property('_id');\n    createdPaperId = res.body.paper._id; // garante que não será undefined\n  });\n  it('should retrieve a paper submission', async () => {\n    const res = await request(app).get(`/api/papers/${createdPaperId}`).expect(200);\n    expect(res.body).to.have.property('_id', createdPaperId);\n    expect(res.body).to.have.property('title', 'Integration Test Paper');\n  });\n  it('should update a paper submission', async () => {\n    const res = await request(app).put(`/api/papers/${createdPaperId}`).send({\n      title: 'Updated Title',\n      content: 'Updated content.'\n    }).expect(200);\n    expect(res.body).to.have.property('message', 'Paper updated successfully');\n    expect(res.body.paper).to.have.property('title', 'Updated Title');\n  });\n  it('should return 404 if paper not found', async () => {\n    const fakeId = new mongoose.Types.ObjectId().toString();\n    await request(app).get(`/api/papers/${fakeId}`).expect(404);\n  });\n  it('should delete a paper submission', async () => {\n    const res = await request(app).delete(`/api/papers/${createdPaperId}`).expect(200);\n    expect(res.body).to.have.property('message', 'Paper deleted successfully');\n  });\n  it('should return 404 when deleting non-existent paper', async () => {\n    const fakeId = new mongoose.Types.ObjectId().toString();\n    await request(app).delete(`/api/papers/${fakeId}`).expect(404);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwibW9uZ29vc2UiLCJleHBlY3QiLCJhcHAiLCJjb25maWciLCJkZXNjcmliZSIsInRpbWVvdXQiLCJiZWZvcmUiLCJjb25uZWN0IiwiZGIiLCJ1cmkiLCJvcHRpb25zIiwiY29ubmVjdGlvbiIsImRyb3BEYXRhYmFzZSIsImFmdGVyIiwiY2xvc2UiLCJjcmVhdGVkUGFwZXJJZCIsIml0IiwicmVzIiwicG9zdCIsInNlbmQiLCJ0aXRsZSIsImNvbnRlbnQiLCJhdXRob3IiLCJUeXBlcyIsIk9iamVjdElkIiwidG9TdHJpbmciLCJib2R5IiwidG8iLCJoYXZlIiwicHJvcGVydHkiLCJwYXBlciIsIl9pZCIsImdldCIsInB1dCIsImZha2VJZCIsImRlbGV0ZSJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxnb2xlc1xcT25lRHJpdmVcXFFBXFxQb3NfQXV0b21hY2FvX1Rlc3Rlc1xcMDctQXV0b21hY2FvX3Rlc3Rlc19BUElcXEFjYWRlbWljX1B1YmxpY19UZXN0ZXNfQVBJXFxhY2FkZW1pYy1wYXBlcnMtYXBpXFxzcmNcXHRlc3RzXFxpbnRlZ3JhdGlvblxcIiwic291cmNlcyI6WyJwYXBlci50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgZXhwZWN0IH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQgYXBwIGZyb20gJy4uLy4uL2FwcC5qcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uLy4uL2NvbmZpZy9jb25maWcuanMnO1xuXG5kZXNjcmliZSgnSW50ZWdyYXRpb24gVGVzdHMgZm9yIEFjYWRlbWljIFBhcGVyIFN1Ym1pc3Npb24gQVBJJywgZnVuY3Rpb24gKCkge1xuICB0aGlzLnRpbWVvdXQoMTAwMDApOyAvLyBhdW1lbnRhIHRpbWVvdXQgcGFyYSBldml0YXIgZmFsaGFzIHBvciBsZW50aWTDo29cblxuICBiZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoY29uZmlnLmRiLnVyaSwgY29uZmlnLmRiLm9wdGlvbnMpO1xuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uZGIuZHJvcERhdGFiYXNlKCk7XG4gIH0pO1xuXG4gIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmRyb3BEYXRhYmFzZSgpO1xuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgfSk7XG5cbiAgbGV0IGNyZWF0ZWRQYXBlcklkO1xuXG4gIGl0KCdzaG91bGQgY3JlYXRlIGEgbmV3IHBhcGVyIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAucG9zdCgnL2FwaS9wYXBlcnMnKVxuICAgICAgLnNlbmQoe1xuICAgICAgICB0aXRsZTogJ0ludGVncmF0aW9uIFRlc3QgUGFwZXInLFxuICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIHRlc3QgY29udGVudCBmb3IgaW50ZWdyYXRpb24uJyxcbiAgICAgICAgYXV0aG9yOiBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKS50b1N0cmluZygpXG4gICAgICB9KVxuICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdtZXNzYWdlJywgJ1BhcGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdwYXBlcicpO1xuICAgIGV4cGVjdChyZXMuYm9keS5wYXBlcikudG8uaGF2ZS5wcm9wZXJ0eSgnX2lkJyk7XG5cbiAgICBjcmVhdGVkUGFwZXJJZCA9IHJlcy5ib2R5LnBhcGVyLl9pZDsgLy8gZ2FyYW50ZSBxdWUgbsOjbyBzZXLDoSB1bmRlZmluZWRcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhIHBhcGVyIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAuZ2V0KGAvYXBpL3BhcGVycy8ke2NyZWF0ZWRQYXBlcklkfWApXG4gICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ19pZCcsIGNyZWF0ZWRQYXBlcklkKTtcbiAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ3RpdGxlJywgJ0ludGVncmF0aW9uIFRlc3QgUGFwZXInKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB1cGRhdGUgYSBwYXBlciBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLnB1dChgL2FwaS9wYXBlcnMvJHtjcmVhdGVkUGFwZXJJZH1gKVxuICAgICAgLnNlbmQoe1xuICAgICAgICB0aXRsZTogJ1VwZGF0ZWQgVGl0bGUnLFxuICAgICAgICBjb250ZW50OiAnVXBkYXRlZCBjb250ZW50LidcbiAgICAgIH0pXG4gICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnLCAnUGFwZXIgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICBleHBlY3QocmVzLmJvZHkucGFwZXIpLnRvLmhhdmUucHJvcGVydHkoJ3RpdGxlJywgJ1VwZGF0ZWQgVGl0bGUnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gNDA0IGlmIHBhcGVyIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBmYWtlSWQgPSBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKS50b1N0cmluZygpO1xuICAgIGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoYC9hcGkvcGFwZXJzLyR7ZmFrZUlkfWApLmV4cGVjdCg0MDQpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRlbGV0ZSBhIHBhcGVyIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAuZGVsZXRlKGAvYXBpL3BhcGVycy8ke2NyZWF0ZWRQYXBlcklkfWApXG4gICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnLCAnUGFwZXIgZGVsZXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gNDA0IHdoZW4gZGVsZXRpbmcgbm9uLWV4aXN0ZW50IHBhcGVyJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGZha2VJZCA9IG5ldyBtb25nb29zZS5UeXBlcy5PYmplY3RJZCgpLnRvU3RyaW5nKCk7XG4gICAgYXdhaXQgcmVxdWVzdChhcHApLmRlbGV0ZShgL2FwaS9wYXBlcnMvJHtmYWtlSWR9YCkuZXhwZWN0KDQwNCk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxPQUFPLE1BQU0sV0FBVztBQUMvQixPQUFPQyxRQUFRLE1BQU0sVUFBVTtBQUMvQixTQUFTQyxNQUFNLFFBQVEsTUFBTTtBQUM3QixPQUFPQyxHQUFHLE1BQU0sY0FBYztBQUM5QixPQUFPQyxNQUFNLE1BQU0sd0JBQXdCO0FBRTNDQyxRQUFRLENBQUMscURBQXFELEVBQUUsWUFBWTtFQUMxRSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOztFQUVyQkMsTUFBTSxDQUFDLFlBQVk7SUFDakIsTUFBTU4sUUFBUSxDQUFDTyxPQUFPLENBQUNKLE1BQU0sQ0FBQ0ssRUFBRSxDQUFDQyxHQUFHLEVBQUVOLE1BQU0sQ0FBQ0ssRUFBRSxDQUFDRSxPQUFPLENBQUM7SUFDeEQsTUFBTVYsUUFBUSxDQUFDVyxVQUFVLENBQUNILEVBQUUsQ0FBQ0ksWUFBWSxDQUFDLENBQUM7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","map":{"version":3,"names":["request","mongoose","expect","app","config","describe","timeout","before","connect","db","uri","options","connection","dropDatabase","after","close","createdPaperId","it","res","post","send","title","content","author","Types","ObjectId","toString","body","to","have","property","paper","_id","get","put","fakeId","delete"],"sourceRoot":"C:\\Users\\goles\\OneDrive\\QA\\Pos_Automacao_Testes\\07-Automacao_testes_API\\Academic_Public_Testes_API\\academic-papers-api\\src\\tests\\integration\\","sources":["paper.test.js"],"sourcesContent":["import request from 'supertest';\nimport mongoose from 'mongoose';\nimport { expect } from 'chai';\nimport app from '../../app.js';\nimport config from '../../config/config.js';\n\ndescribe('Integration Tests for Academic Paper Submission API', function () {\n  this.timeout(10000); // aumenta timeout para evitar falhas por lentidão\n\n  before(async () => {\n    await mongoose.connect(config.db.uri, config.db.options);\n    await mongoose.connection.db.dropDatabase();\n  });\n\n  after(async () => {\n    await mongoose.connection.dropDatabase();\n    await mongoose.connection.close();\n  });\n\n  let createdPaperId;\n\n  it('should create a new paper submission', async () => {\n    const res = await request(app)\n      .post('/api/papers')\n      .send({\n        title: 'Integration Test Paper',\n        content: 'This is a test content for integration.',\n        author: new mongoose.Types.ObjectId().toString()\n      })\n      .expect(201);\n\n    expect(res.body).to.have.property('message', 'Paper created successfully');\n    expect(res.body).to.have.property('paper');\n    expect(res.body.paper).to.have.property('_id');\n\n    createdPaperId = res.body.paper._id; // garante que não será undefined\n  });\n\n  it('should retrieve a paper submission', async () => {\n    const res = await request(app)\n      .get(`/api/papers/${createdPaperId}`)\n      .expect(200);\n\n    expect(res.body).to.have.property('_id', createdPaperId);\n    expect(res.body).to.have.property('title', 'Integration Test Paper');\n  });\n\n  it('should update a paper submission', async () => {\n    const res = await request(app)\n      .put(`/api/papers/${createdPaperId}`)\n      .send({\n        title: 'Updated Title',\n        content: 'Updated content.'\n      })\n      .expect(200);\n\n    expect(res.body).to.have.property('message', 'Paper updated successfully');\n    expect(res.body.paper).to.have.property('title', 'Updated Title');\n  });\n\n  it('should return 404 if paper not found', async () => {\n    const fakeId = new mongoose.Types.ObjectId().toString();\n    await request(app).get(`/api/papers/${fakeId}`).expect(404);\n  });\n\n  it('should delete a paper submission', async () => {\n    const res = await request(app)\n      .delete(`/api/papers/${createdPaperId}`)\n      .expect(200);\n\n    expect(res.body).to.have.property('message', 'Paper deleted successfully');\n  });\n\n  it('should return 404 when deleting non-existent paper', async () => {\n    const fakeId = new mongoose.Types.ObjectId().toString();\n    await request(app).delete(`/api/papers/${fakeId}`).expect(404);\n  });\n});"],"mappings":"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","ignoreList":[]}},"mtime":1759203911839}}